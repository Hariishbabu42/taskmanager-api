"""
# Task Manager API

This is a FastAPI-based project that allows you to manage tasks. It provides endpoints to create, read, update, and delete tasks. The application is configured using `uvicorn_config.py` and can be started using the `start.py` script. Before running the start.py make sure the database url is given in `.env` file.

## Project Structure

    taskmanager-api/
    ├── .env                   # Environment variables for configuration
    ├── .gitignore             # Git ignore file
    ├── app.log                # Log file
    ├── README.md              # Project overview for developers and consumers
    ├── requirements.txt       # Python dependencies
    ├── src/                   # Source code for the FastAPI project
    │   ├── __init__.py        # Init file for the app
    │   ├── tasks_main.py      # FastAPI entry point
    │   ├── core/              # Core application files
    │   │   ├── __init__.py    # Init file for the app
    │   │   ├── config.py      # Configuration file
    │   │   ├── database.py    # Database connection
    │   │   ├── logging.py     # Logging configuration
    │   ├── tasks/             # FastAPI app for task management
    │   │   ├── __init__.py    # Init file for the app
    │   │   ├── models.py      # SQLAlchemy models
    │   │   ├── schemas.py     # Pydantic schemas
    │   │   ├── routes.py      # API routes
    │   │   └── crud.py        # CRUD operations
    │   └── tests/             # Automated tests
    │       ├── test_create_task.py
    │       ├── test_update_task.py
    │       └── test_get_task.py
    └── start.py # Script to start the FastAPI application
    └── uvicorn_config.py      # Uvicorn server configuration


## Installation

    To install the dependencies for the project, run:
    

    ```bash
        pip install -r requirements.txt
    ```

## Configuration
    The application uses the configuration stored in uvicorn_config.py. This file contains the following parameters:

    host: The host on which the application will run (default: 127.0.0.1).
    port: The port on which the application will run (default: 8000).
    workers: The number of worker processes (default: 1).
    reload: Whether to enable the auto-reloading of the application in development (default: True).

## Running the Application
    Before running the start.py make sure the database url is given in .env file.
    To run the FastAPI application, use the start.py script. This script starts the server with the configuration provided in uvicorn_config.py.

## Running Locally
    To start the FastAPI application locally, run the following command:

    ```bash
        python start.py 
    ```
    This will start the server on the host and port specified in uvicorn_config.py. If reload is set to True, the server will automatically reload on code changes.

    Example Configuration in uvicorn_config.py:
    config = {
        "host": "127.0.0.1",  # The host to bind to
        "port": 8000,         # The port to bind to
        "workers": 1,         # Number of workers (adjust based on your needs)
        "reload": True,       # Enable or disable auto-reload in development
    }

## Development Mode
    In development mode, "reload=True" will enable auto-reloading of the application. This is useful for local development to automatically reflect code changes without restarting the server manually.

## Production Mode
    In production mode, set "reload=False" and increase the number of workers as needed for better performance.

    For example, in uvicorn_config.py:

    config = {
        "host": "0.0.0.0",
        "port": 8000,
        "workers": 4,
        "reload": False,
    }
   ## Uvicorn CLI (Optional)
    If you want to run the server directly using Uvicorn, you can use the following command:
   
    ```bash
        uvicorn src.tasks_main:app --host 127.0.0.1 --port 8000 --workers 4 --reload
    ```

## API Endpoints
    The following endpoints are available in this API:

    1. Create a Task
        POST /tasks/create_task
        Request body: JSON object with task details.
        Response: A newly created task object with an autogenerated ID.

    2. Get a Task by ID
        GET /tasks/get_task/{task_id}
        Path parameter: task_id - The ID of the task.
        Response: The task object with the given ID.

    3. Update a Task by ID
        PUT /tasks/update_task/{task_id}
        Path parameter: task_id - The ID of the task.
        Request body: JSON object with updated task details.
        Response: The updated task object.
        
    4. Delete a Task by ID
        DELETE /tasks/delete_task/{task_id}
        Path parameter: task_id - The ID of the task.
        Response: A message indicating whether the task was successfully deleted.


## Testing
    To run the automated tests, use pytest:

    use pytest for testing.
    Make sure that your environment is properly set up with the required database and dependencies.

    Test Endpoints
    test_create_task.py: Tests task creation.
    test_update_task.py: Tests updating a task.
    test_get_task.py: Tests fetching tasks.